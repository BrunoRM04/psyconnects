<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PsyConnects | Psicólogos Disponibles</title>
    <link rel="stylesheet" href="public/css/styles.css">
    <link rel="shortcut icon" href="public/img/marca/icono.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>

    <header>
        <div class="logo">
            <img src="public/img/marca/logo cuatro.png" alt="Logo">
        </div>
        <nav>
            <ul class="nav-links">
                <li><a href="index.html">Inicio</a></li>
                <li><a href="psicologos.html">Psicólogos Disponibles</a></li>
                <li><a href="investigacion.html">Investigaciones</a></li>
                <li><a href="test.html">Test Práctico</a></li>
                <li><a href="ofertas.html">Ofertas Laborales</a></li>
                <li><a href="https://forms.gle/XNqhQksUqjXX6B4p7">Registrarse</a></li>
            </ul>
            <ul class="nav-icons">
                <li><a href="index.html"><i class="fas fa-home"></i></a></li>
                <li><a href="psicologos.html"><i class="fas fa-user-md"></i></a></li>
                <li><a href="investigacion.html"><i class="fas fa-book"></i></a></li>
                <li><a href="test.html"><i class="fas fa-pencil-alt"></i></a></li>
                <li><a href="ofertas.html"><i class="fas fa-briefcase"></i></a></li>
                <li><a href="https://forms.gle/XNqhQksUqjXX6B4p7"><i class="fas fa-user-plus"></i></a></li>
            </ul>
        </nav> 
    </header>

    <main>
        <div class="titulo-con-linea">
            <h1 class="titulo">PSICÓLOGOS DISPONIBLES</h1>
        </div>
        <section class="filter-container">
            <div>
                <label for="filter-age">Filtrar por Edad:</label>
                <select id="filter-age">
                    <option value="">Seleccionar</option>
                    <option value="menor">Menor a Mayor</option>
                    <option value="mayor">Mayor a Menor</option>
                </select>
            </div>
            <div>
                <label for="filter-price">Filtrar por Precio:</label>
                <select id="filter-price">
                    <option value="">Seleccionar</option>
                    <option value="menor">Menor a Mayor</option>
                    <option value="mayor">Mayor a Menor</option>
                </select>
            </div>
            <div>
                <label for="filter-experience">Filtrar por Experiencia:</label>
                <select id="filter-experience">
                    <option value="">Seleccionar</option>
                    <option value="menor">Menor a Mayor</option>
                    <option value="mayor">Mayor a Menor</option>
                </select>
            </div>
        </section>
        <!--
        <section id="psicologos-list">
        </section>
        <div id="contenedor-tarjetas"></div>
        -->
    </main>

    <footer>
        <div class="footer-container">
            <div class="footer-nav">
                <a href="#">EMPRESAS</a>
                <a href="https://forms.gle/xZERw5gE8yzQELDc8">REGISTRARSE</a>
                <a href="doc/pdf/TÉRMINOS Y CONDICIONES - PSYCONNECTS.pdf">TÉRMINOS Y CONDICIONES</a>
                <a href="#">QUIENES SOMOS</a>
            </div>
            <div class="footer-social">
                <a href="#"><i class="fab fa-instagram"></i></a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>Todos Los Derechos Reservados 2024 | @PsyConnects</p>
        </div>
    </footer>

    <script>

document.addEventListener("DOMContentLoaded", () => {
    const filterAge = document.getElementById("filter-age");
    const filterPrice = document.getElementById("filter-price");
    const filterExperience = document.getElementById("filter-experience");
    const contenedor = document.getElementById('contenedor-tarjetas');

    let psicologos = [];

    fetch('./json/psicologos.json')
        .then(response => response.json())
        .then(data => {
            psicologos = data.psicologos;
            displayPsicologos(psicologos);
        });

    filterAge.addEventListener("change", () => filterPsicologos());
    filterPrice.addEventListener("change", () => filterPsicologos());
    filterExperience.addEventListener("change", () => filterPsicologos());

    function filterPsicologos() {
        let filteredPsicologos = [...psicologos];

        const ageOrder = filterAge.value;
        const priceOrder = filterPrice.value;
        const experienceOrder = filterExperience.value;

        if (ageOrder) {
            filteredPsicologos.sort((a, b) => ageOrder === 'menor' ? a.edad - b.edad : b.edad - a.edad);
        }

        if (priceOrder) {
            filteredPsicologos.sort((a, b) => priceOrder === 'menor' ? a.precioServicioHora - b.precioServicioHora : b.precioServicioHora - a.precioServicioHora);
        }

        if (experienceOrder) {
            filteredPsicologos.sort((a, b) => experienceOrder === 'menor' ? a.añosExperiencia - b.añosExperiencia : b.añosExperiencia - a.añosExperiencia);
        }

        displayPsicologos(filteredPsicologos);
    }

    function displayPsicologos(psicologos) {
        contenedor.innerHTML = "";

        psicologos.forEach(psicologo => {
            const tarjeta = document.createElement('div');
            tarjeta.className = 'tarjeta';
            tarjeta.innerHTML = `
                <div class="cabecera-tarjeta">
                    <img src="${psicologo.fotoPerfil}" alt="${psicologo.nombre} ${psicologo.apellido}" class="foto-perfil">
                </div>
                <div class="cuerpo-tarjeta">
                    <h2>${psicologo.nombre} ${psicologo.apellido}</h2>
                    <div class="detalles">
                        <span class="insignia">${psicologo.edad} Años</span>
                        <span class="insignia">${psicologo.pais}</span>
                    </div>
                    <div class="especialidades">
                        ${psicologo.especializacion.map(esp => `<div class="especialidad">${esp}</div>`).join('')}
                    </div>
                    <div class="iconos-sociales">
                        <a href="${psicologo.redesSociales.linkedin}" target="_blank"><i class="fab fa-linkedin"></i></a>
                        <a href="${psicologo.redesSociales.facebook}" target="_blank"><i class="fab fa-facebook"></i></a>
                        <a href="${psicologo.redesSociales.twitter}" target="_blank"><i class="fab fa-twitter"></i></a>
                    </div>
                    <a href="public/html/perfil.html?id=${psicologo.id}" class="boton">Ver Perfil ></a>
                </div>
            `;
            contenedor.appendChild(tarjeta);
        });
    }
});
    </script>

</body>
</html>