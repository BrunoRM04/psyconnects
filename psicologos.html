<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>PsyConnects | Psic√≥logos Disponibles</title>

    <meta name="description"
        content="Descubre y conecta con psic√≥logos profesionales en Am√©rica Latina. Filtra por edad, precio, experiencia y pa√≠s para encontrar al profesional que se adapte a tus necesidades y presupuesto.">
    <meta name="keywords"
        content="psic√≥logos, psic√≥logos disponibles, terapia, salud mental, atenci√≥n psicol√≥gica, consulta psicol√≥gica, bienestar emocional, Am√©rica Latina">
    <meta name="robots" content="index, follow">
    <meta name="author" content="PsyConnects">
    <link rel="canonical" href="https://www.psyconnects.com/psicologos.html">

    <meta property="og:title" content="PsyConnects | Psic√≥logos Disponibles">
    <meta property="og:description"
        content="Encuentra y reserva tu cita con psic√≥logos profesionales que se adaptan a tu econom√≠a, pa√≠s y necesidades. Descubre profesionales en salud mental.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.psyconnects.com/psicologos.html">
    <meta property="og:image" content="https://www.psyconnects.com/public/img/marca/icono.png">

    <link rel="shortcut icon" href="public/img/marca/icono.png">
    <link rel="stylesheet" href="public/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>


<body>

    <header>

        <div class="logo">
            <img src="public/img/marca/icono 2.png" alt="Logo de PsyConnects" title="PsyConnects">
        </div>
        <div class="menu-toggle" role="button" aria-label="Abrir men√∫">
            <i class="fas fa-bars"></i>
        </div>
        <nav class="nav-menu" aria-label="Men√∫ principal">
            <div class="close-menu" role="button" aria-label="Cerrar men√∫">
                <i class="fas fa-times"></i>
            </div>
            <ul class="nav-links">
                <li><a href="index.html" title="Inicio">üè† Inicio</a></li>
                <li><a href="psicologos.html" title="Psic√≥logos Disponibles">üß† Psic√≥logos Disponibles</a></li>
                <li><a href="investigaciones.html" title="Investigaciones">üì° Investigaciones</a></li>
                <li><a href="ofertas.html" title="Ofertas Laborales">üíº Ofertas Laborales</a></li>
                <li><a href="login.html" title="Mi Cuenta">üë§ Mi Cuenta</a></li>
                <li><a href="./public/html/register.html" title="Registrarse">üÜï Registrarse</a></li>
            </ul>
        </nav>

    </header>

    <main>

        <div class="titulo-con-linea">
            <h1 class="titulo">PSIC√ìLOGOS DISPONIBLES</h1>
        </div>

        <section class="filter-container">
            <select id="filter-age" aria-label="Filtrar por Edad">
                <option value="" disabled selected>Edad</option>
                <option value="menor">Menor a Mayor</option>
                <option value="mayor">Mayor a Menor</option>
            </select>

            <select id="filter-price" aria-label="Filtrar por Precio">
                <option value="" disabled selected>Precio</option>
                <option value="menor">Menor a Mayor</option>
                <option value="mayor">Mayor a Menor</option>
            </select>

            <select id="filter-experience" aria-label="Filtrar por Experiencia">
                <option value="" disabled selected>Experiencia</option>
                <option value="menor">Menor a Mayor</option>
                <option value="mayor">Mayor a Menor</option>
            </select>

            <select id="filter-country" aria-label="Filtrar por Pa√≠s">
                <option value="" disabled selected>Pa√≠s</option>
                <option value="Argentina">Argentina</option>
                <option value="Bolivia">Bolivia</option>
                <option value="Brasil">Brasil</option>
                <option value="Chile">Chile</option>
                <option value="Colombia">Colombia</option>
                <option value="Costa Rica">Costa Rica</option>
                <option value="Cuba">Cuba</option>
                <option value="Ecuador">Ecuador</option>
                <option value="El Salvador">El Salvador</option>
                <option value="Espa√±a">Espa√±a</option>
                <option value="Guatemala">Guatemala</option>
                <option value="Honduras">Honduras</option>
                <option value="M√©xico">M√©xico</option>
                <option value="Nicaragua">Nicaragua</option>
                <option value="Panam√°">Panam√°</option>
                <option value="Paraguay">Paraguay</option>
                <option value="Per√∫">Per√∫</option>
                <option value="Rep√∫blica Dominicana">Rep√∫blica Dominicana</option>
                <option value="Uruguay">Uruguay</option>
                <option value="Venezuela">Venezuela</option>
            </select>
        </section>

        <section id="psicologos-list">
        </section>

        <div id="contenedor-tarjetas">
        </div>

        <div id="loading-indicator" class="loading-hidden">
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
        </div>

        <div id="loader" class="loader">
            <img src="./public/img/marca/icono 2.png" alt="Logo de PsyConnects" class="loader-logo" title="Cargando">
            <p class="loader-text">Cargando... üöÄ</p>
        </div>

    </main>

    <footer>

        <div class="footer-container">
            <div class="footer-nav">
                <a href="#" title="Empresas">EMPRESAS</a>
                <a href="#" title="Registrarse">REGISTRARSE</a>
                <a href="doc/pdf/T√âRMINOS Y CONDICIONES - PSYCONNECTS.pdf" title="T√©rminos y Condiciones">T√âRMINOS Y CONDICIONES</a>
                <a href="#" title="Qui√©nes Somos">QUIENES SOMOS</a>
            </div>
            <div class="footer-social">
                <a href="https://www.instagram.com/psyconnects/" aria-label="Instagram de PsyConnects"><i class="fab fa-instagram"></i></a>
                <a href="https://www.facebook.com/profile.php?id=61564496164581" aria-label="Facebook de PsyConnects"><i class="fab fa-facebook"></i></a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>Todos Los Derechos Reservados 2024 | @PsyConnects</p>
        </div>

    </footer>

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "PsyConnects",
        "url": "https://www.psyconnects.com/",
        "logo": "https://www.psyconnects.com/public/img/marca/icono.png",
        "sameAs": [
        "https://www.instagram.com/psyconnects/",
        "https://www.facebook.com/profile.php?id=61564496164581"
        ],
        "description": "PsyConnects es la plataforma l√≠der en conectar personas que buscan apoyo psicol√≥gico con psic√≥logos profesionales en Am√©rica Latina."
    }
    </script>

    <script type="module">

        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
        import { getFirestore, collection, getDocs, updateDoc, doc, increment } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyA3YzDZbNdjZJL5siTvV9N2n1-z_tI5BvQ",
            authDomain: "psyconnects-7be13.firebaseapp.com",
            projectId: "psyconnects-7be13",
            storageBucket: "psyconnects-7be13.appspot.com",
            messagingSenderId: "299531221809",
            appId: "1:299531221809:web:c6bba4831be2d70d910e10",
            measurementId: "G-FKC5P4PE6V"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        document.addEventListener("DOMContentLoaded", async () => {
            const filterAge = document.getElementById("filter-age");
            const filterPrice = document.getElementById("filter-price");
            const filterExperience = document.getElementById("filter-experience");
            const filterCountry = document.getElementById("filter-country");
            const contenedor = document.getElementById('contenedor-tarjetas');
            const loadingIndicator = document.getElementById('loading-indicator');
            const loader = document.getElementById('loader');

            let psicologos = [];
            let currentIndex = 0;
            const incrementCount = 20;

            const querySnapshot = await getDocs(collection(db, "psicologos"));
            psicologos = querySnapshot.docs.map(doc => {
                const data = doc.data();
                return {
                    ...data,
                    id: doc.id,
                    edad: calcularEdad(data.fechaNacimiento)
                };
            });

            shuffleArray(psicologos);
            displayPsicologos();

            filterAge.addEventListener("change", () => applyFilters());
            filterPrice.addEventListener("change", () => applyFilters());
            filterExperience.addEventListener("change", () => applyFilters());
            filterCountry.addEventListener("change", () => applyFilters());

            function applyFilters() {
                currentIndex = 0;
                contenedor.innerHTML = "";
                displayPsicologos();
            }

            function displayPsicologos() {
                loadingIndicator.classList.remove('loading-hidden');

                setTimeout(() => {
                    const filteredPsicologos = applyAllFilters(psicologos);
                    const psicologosToDisplay = filteredPsicologos.slice(currentIndex, currentIndex + incrementCount);

                    psicologosToDisplay.forEach(psicologo => {
                        const tarjeta = document.createElement('div');
                        tarjeta.className = 'tarjeta';
                        tarjeta.innerHTML = `
                            <div class="cabecera-tarjeta">
                            </div>
                            <img src="${psicologo.fotoPerfil || 'public/img/default-profile.png'}" alt="${psicologo.nombre} ${psicologo.apellido}" class="foto-perfil">
                            <div class="cuerpo-tarjeta">
                                <h2>${psicologo.nombre} ${psicologo.apellido} üß†</h2>
                                <div class="detalles">
                                    <span class="insignia">${psicologo.edad} A√±os</span>
                                    <span class="insignia">${psicologo.pais}</span>
                                </div>
                                <div class="especialidades">
                                    ${psicologo.tiposTerapia ? psicologo.tiposTerapia.map(terapia => `<div class="especialidad">${terapia}</div>`).join('') : ''}
                                </div>
                                <a href="#" class="boton ver-perfil" data-id="${psicologo.id}" title="Ver perfil de ${psicologo.nombre} ${psicologo.apellido}">Ver Perfil üëâ</a>
                            </div>
                        `;
                        tarjeta.querySelector('.ver-perfil').addEventListener('click', async function (event) {
                            event.preventDefault();
                            const id = this.getAttribute('data-id');

                            loader.classList.add('active');

                            try {
                                await incrementVisitCount(id);
                                window.location.href = `public/html/perfil.html?id=${id}`;
                            } catch (error) {
                                console.error('Error al incrementar el contador de visitas:', error);
                                window.location.href = `public/html/perfil.html?id=${id}`;
                            }
                        });
                        contenedor.appendChild(tarjeta);
                    });

                    currentIndex += incrementCount;
                    loadingIndicator.classList.add('loading-hidden');
                }, 1000);
            }

            function incrementVisitCount(psicologoId) {
                const psicologoRef = doc(db, "psicologos", psicologoId);
                return updateDoc(psicologoRef, {
                    visitas: increment(1)
                });
            }

            function applyAllFilters(psicologos) {
                let filteredPsicologos = [...psicologos];
                const ageOrder = filterAge.value;
                const priceOrder = filterPrice.value;
                const experienceOrder = filterExperience.value;
                const countryFilter = filterCountry.value;

                if (ageOrder) {
                    filteredPsicologos.sort((a, b) => ageOrder === 'menor' ? a.edad - b.edad : b.edad - a.edad);
                }

                if (priceOrder) {
                    filteredPsicologos.sort((a, b) => priceOrder === 'menor' ? a.precioServicioHora - b.precioServicioHora : b.precioServicioHora - a.precioServicioHora);
                }

                if (experienceOrder) {
                    filteredPsicologos.sort((a, b) => experienceOrder === 'menor' ? a.a√±osExperiencia - b.a√±osExperiencia : b.a√±osExperiencia - a.a√±osExperiencia);
                }

                if (countryFilter) {
                    filteredPsicologos = filteredPsicologos.filter(psicologo => psicologo.pais === countryFilter);
                }

                return filteredPsicologos;
            }

            window.addEventListener('scroll', () => {
                if (window.innerHeight + window.scrollY >= document.body.offsetHeight) {
                    displayPsicologos();
                }
            });

            function calcularEdad(fechaNacimiento) {
                const hoy = new Date();
                const fechaNac = new Date(fechaNacimiento);
                let edad = hoy.getFullYear() - fechaNac.getFullYear();
                const mes = hoy.getMonth() - fechaNac.getMonth();
                if (mes < 0 || (mes === 0 && hoy.getDate() < fechaNac.getDate())) {
                    edad--;
                }
                return edad;
            }

            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }
        });

        document.querySelector('.menu-toggle').addEventListener('click', function () {
            document.querySelector('.nav-menu').classList.add('active');
        });

        document.querySelector('.close-menu').addEventListener('click', function () {
            document.querySelector('.nav-menu').classList.remove('active');
        });

    </script>

</body>

</html>